name: Code Analysis
on:
    pull_request:
jobs:
    analysis:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
              with:
                  fetch-depth: 0

            - name: Setup SonarQube scanner
              uses: sonarsource/sonarqube-scan-action@master
              env:
                  SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
                  SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}
              with:
                  args: >
                    -Dsonar.projectKey=your-project-key
                    -Dsonar.pullrequest.key=${{ github.event.pull_request.number }}
                    -Dsonar.pullrequest.branch=${{ github.head_ref }}
                    -Dsonar.pullrequest.base=${{ github.base_ref }}
